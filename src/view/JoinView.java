package view;

import javax.swing.ImageIcon;
import controller.JoinController;
import sun.print.DialogOwner;

public class JoinView extends javax.swing.JFrame {
    JoinController joinController;
    
    public JoinView(JoinController joinController) {
        this.joinController = joinController;
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        mainPanel = new javax.swing.JPanel();
        signUpPanel = new javax.swing.JPanel();
        signUpUserLabel = new javax.swing.JLabel();
        signUpPasswordLabel = new javax.swing.JLabel();
        signUpUserNameTxt = new javax.swing.JTextField();
        signUpPasswordTxt = new javax.swing.JPasswordField();
        signUpBtn = new javax.swing.JButton();
        labelName = new javax.swing.JLabel();
        signUpLastNameTxt = new javax.swing.JTextField();
        singUpNameTxt = new javax.swing.JTextField();
        singUpLastNameLabel = new javax.swing.JLabel();
        goToLoginBtn = new javax.swing.JButton();
        loginPanel = new javax.swing.JPanel();
        LoginuserLabel = new javax.swing.JLabel();
        LoginPasswordLabel = new javax.swing.JLabel();
        LoginuserTxt = new javax.swing.JTextField();
        LoginpasswordTxt = new javax.swing.JPasswordField();
        loginBtn = new javax.swing.JButton();
        goSignUpBtn = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Block Pain | Login");
        setIconImage((new ImageIcon(getClass().getResource("/resources/img/logo.png"))).getImage());
        setMinimumSize(new java.awt.Dimension(600, 650));

        mainPanel.setBackground(new java.awt.Color(27, 20, 100));
        mainPanel.setLayout(new java.awt.GridBagLayout());

        signUpPanel.setBackground(new java.awt.Color(255, 255, 255));
        signUpPanel.setFocusable(false);
        signUpPanel.setPreferredSize(new java.awt.Dimension(353, 240));
        signUpPanel.setRequestFocusEnabled(false);
        signUpPanel.setLayout(new java.awt.GridBagLayout());

        signUpUserLabel.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpUserLabel.setText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 68, 10, 0);
        signUpPanel.add(signUpUserLabel, gridBagConstraints);

        signUpPasswordLabel.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpPasswordLabel.setText("Contraseña");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 68, 10, 0);
        signUpPanel.add(signUpPasswordLabel, gridBagConstraints);

        signUpUserNameTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpUserNameTxt.setToolTipText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 18, 10, 35);
        signUpPanel.add(signUpUserNameTxt, gridBagConstraints);

        signUpPasswordTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpPasswordTxt.setToolTipText("Contraseña");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 6;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 18, 10, 35);
        signUpPanel.add(signUpPasswordTxt, gridBagConstraints);

        signUpBtn.setBackground(new java.awt.Color(236, 0, 140));
        signUpBtn.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpBtn.setForeground(new java.awt.Color(255, 255, 255));
        signUpBtn.setText("Registrarse");
        signUpBtn.setBorder(javax.swing.BorderFactory.createEmptyBorder(10, 10, 10, 10));
        signUpBtn.setBorderPainted(false);
        signUpBtn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        signUpBtn.setFocusPainted(false);
        signUpBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                signUpBtnActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 8;
        gridBagConstraints.ipadx = 23;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 68, 10, 0);
        signUpPanel.add(signUpBtn, gridBagConstraints);

        labelName.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        labelName.setText("Nombres");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(30, 68, 10, 0);
        signUpPanel.add(labelName, gridBagConstraints);

        signUpLastNameTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        signUpLastNameTxt.setToolTipText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 18, 10, 35);
        signUpPanel.add(signUpLastNameTxt, gridBagConstraints);

        singUpNameTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        singUpNameTxt.setToolTipText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(30, 18, 10, 35);
        signUpPanel.add(singUpNameTxt, gridBagConstraints);

        singUpLastNameLabel.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        singUpLastNameLabel.setText("Apellidos");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(10, 68, 10, 0);
        signUpPanel.add(singUpLastNameLabel, gridBagConstraints);

        goToLoginBtn.setBackground(new java.awt.Color(0, 0, 0));
        goToLoginBtn.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        goToLoginBtn.setForeground(new java.awt.Color(0, 255, 197));
        goToLoginBtn.setText("Tengo Cuenta");
        goToLoginBtn.setBorder(javax.swing.BorderFactory.createEmptyBorder(10, 10, 10, 10));
        goToLoginBtn.setBorderPainted(false);
        goToLoginBtn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        goToLoginBtn.setFocusPainted(false);
        goToLoginBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                goToLoginBtnActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 8;
        gridBagConstraints.ipadx = 17;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHEAST;
        gridBagConstraints.insets = new java.awt.Insets(10, 18, 10, 35);
        signUpPanel.add(goToLoginBtn, gridBagConstraints);

        mainPanel.add(signUpPanel, new java.awt.GridBagConstraints());

        loginPanel.setBackground(new java.awt.Color(255, 255, 255));
        loginPanel.setFocusable(false);
        loginPanel.setRequestFocusEnabled(false);
        loginPanel.setLayout(new java.awt.GridBagLayout());

        LoginuserLabel.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        LoginuserLabel.setText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(51, 89, 0, 0);
        loginPanel.add(LoginuserLabel, gridBagConstraints);

        LoginPasswordLabel.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        LoginPasswordLabel.setText("Contraseña");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(27, 68, 0, 0);
        loginPanel.add(LoginPasswordLabel, gridBagConstraints);

        LoginuserTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        LoginuserTxt.setToolTipText("Usuario");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(48, 4, 0, 41);
        loginPanel.add(LoginuserTxt, gridBagConstraints);

        LoginpasswordTxt.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        LoginpasswordTxt.setToolTipText("Contraseña");
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.gridwidth = 3;
        gridBagConstraints.gridheight = 2;
        gridBagConstraints.ipadx = 148;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(24, 4, 0, 41);
        loginPanel.add(LoginpasswordTxt, gridBagConstraints);

        loginBtn.setBackground(new java.awt.Color(0, 255, 197));
        loginBtn.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        loginBtn.setText("Entrar");
        loginBtn.setBorder(javax.swing.BorderFactory.createEmptyBorder(10, 10, 10, 10));
        loginBtn.setBorderPainted(false);
        loginBtn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        loginBtn.setFocusPainted(false);
        loginBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                loginBtnActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.gridwidth = 2;
        gridBagConstraints.ipadx = 47;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(49, 68, 11, 0);
        loginPanel.add(loginBtn, gridBagConstraints);

        goSignUpBtn.setBackground(new java.awt.Color(0, 0, 0));
        goSignUpBtn.setFont(new java.awt.Font("Calibri", 0, 14)); // NOI18N
        goSignUpBtn.setForeground(new java.awt.Color(236, 0, 140));
        goSignUpBtn.setText("No tengo cuenta");
        goSignUpBtn.setBorder(javax.swing.BorderFactory.createEmptyBorder(10, 10, 10, 10));
        goSignUpBtn.setBorderPainted(false);
        goSignUpBtn.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        goSignUpBtn.setFocusPainted(false);
        goSignUpBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                goSignUpBtnActionPerformed(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 4;
        gridBagConstraints.ipadx = 17;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.insets = new java.awt.Insets(49, 18, 11, 41);
        loginPanel.add(goSignUpBtn, gridBagConstraints);

        mainPanel.add(loginPanel, new java.awt.GridBagConstraints());

        getContentPane().add(mainPanel, java.awt.BorderLayout.CENTER);

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void goSignUpBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_goSignUpBtnActionPerformed
        this.loginPanel.setVisible(false);
        this.signUpPanel.setVisible(true);        
    }//GEN-LAST:event_goSignUpBtnActionPerformed

    private void goToLoginBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_goToLoginBtnActionPerformed
        this.loginPanel.setVisible(true);
        this.signUpPanel.setVisible(false); 
    }//GEN-LAST:event_goToLoginBtnActionPerformed

    private void loginBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_loginBtnActionPerformed
        String user = LoginuserTxt.getText();
        String password = LoginpasswordTxt.getText();
      
        joinController.login(user, password);
    }//GEN-LAST:event_loginBtnActionPerformed

    private void signUpBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_signUpBtnActionPerformed
        String names = singUpNameTxt.getText().trim();
        String lastNames = signUpLastNameTxt.getText().trim();
        String user = signUpUserNameTxt.getText().trim();
        String password = signUpPasswordTxt.getText().trim();
        
        // Enviamos con los espacios en blanco removidos
        singUpNameTxt.setText(names);
        signUpLastNameTxt.setText(lastNames);
        signUpUserNameTxt.setText(user);
        signUpPasswordTxt.setText(password);
        
        Dialog dialog = new Dialog();
        
        if (names.isEmpty() || lastNames.isEmpty() || user.isEmpty() || password.isEmpty()) {
            dialog.setMessage("No puede haber campos vacios");
            
        } else {
            
            if (user.contains(" ")) {
                dialog.setMessage("El nombre de usuario no puede contener espacio en blanco.");
          
            } else {
                int result = joinController.signUp(user,names,lastNames, password);

                if (result == 1) {
                    // Este nombre de usuario ya eexiste       
                    dialog.setMessage("Este usuario ya existe");
                }
            }
        }
    }//GEN-LAST:event_signUpBtnActionPerformed

    

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel LoginPasswordLabel;
    private javax.swing.JPasswordField LoginpasswordTxt;
    private javax.swing.JLabel LoginuserLabel;
    private javax.swing.JTextField LoginuserTxt;
    private javax.swing.JButton goSignUpBtn;
    private javax.swing.JButton goToLoginBtn;
    private javax.swing.JLabel labelName;
    private javax.swing.JButton loginBtn;
    private javax.swing.JPanel loginPanel;
    private javax.swing.JPanel mainPanel;
    private javax.swing.JButton signUpBtn;
    private javax.swing.JTextField signUpLastNameTxt;
    public javax.swing.JPanel signUpPanel;
    private javax.swing.JLabel signUpPasswordLabel;
    private javax.swing.JPasswordField signUpPasswordTxt;
    private javax.swing.JLabel signUpUserLabel;
    private javax.swing.JTextField signUpUserNameTxt;
    private javax.swing.JLabel singUpLastNameLabel;
    private javax.swing.JTextField singUpNameTxt;
    // End of variables declaration//GEN-END:variables
}
